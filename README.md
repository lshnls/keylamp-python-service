# KeyLamp: Полный проект

## Описание проекта

**KeyLamp** — это проект, который сочетает аппаратную и программную части для создания устройства, показывающего текущую раскладку клавиатуры с помощью RGB-светодиода. Система состоит из нескольких компонентов, которые работают совместно для обеспечения удобного отображения состояния клавиатуры в реальном времени.

Основная цель — предоставить удобный индикатор раскладки клавиатуры в виде лампы, управляемой через USB-соединение, которая изменяет цвет в зависимости от текущей раскладки (например, `us` для английской раскладки и `ru` для русской).

Проект включает следующие компоненты:

1. **Python-сервис** для отслеживания раскладки клавиатуры в Linux и управления подключенным устройством.
2. **Arduino-скетч** для управления RGB-светодиодами, отображающими цвет текущей раскладки.
3. **GNOME-плагин** для интеграции с GNOME Shell и обмена данными о раскладке через D-Bus.
4. **Отливка куба** (или аналогичная физическая часть), которая представляет собой корпус устройства, куда устанавливаются компоненты.

---

## Архитектура

Проект состоит из четырёх основных частей:

### 1. Сборка электронной схемы и Arduino-скетч 

* **Репозиторий:** [keylamp-arduino](https://github.com/lshnls/keylamp-arduino)
* **Описание:** Инструкция по сборке электронной  схемы лампы и Скетч для Arduino, который управляет RGB-светодиодом, меняя цвет в зависимости от полученных через последовательный порт данных.
* **Основные задачи:**

  * Получение данных о цвете от Python-сервиса через последовательный порт.
  * Управление RGB-светодиодами для отображения цвета.

### 2. GNOME Shell plugin

* **Репозиторий:** [keylamp-gnome-plugin](https://github.com/lshnls/keylamp-gnome-plugin)
* **Описание:** Расширение для GNOME Shell, которое отслеживает текущую раскладку клавиатуры и передаёт эти данные через D-Bus в другие приложения.
* **Основные задачи:**

  * Слушает изменения раскладки клавиатуры.
  * Отправляет события через D-Bus, чтобы другие компоненты (например, Python-сервис) могли использовать эти данные.
  

### 3. Python-сервис

* **Репозиторий:** [keylamp-python-service](https://github.com/lshnls/keylamp-python-service)
* **Описание:** Python-скрипт, который отслеживает изменения раскладки клавиатуры через D-Bus и отправляет соответствующий код цвета в Arduino.
* **Основные задачи:**

  * Подключение к D-Bus GNOME для отслеживания раскладки.
  * Отправка кодов цветов по USB через последовательный порт.
  * Поддержка нескольких раскладок и цветов.

### 4. Сборка схемы и отливка куба (или другой корпус)

* **Описание:** Физический корпус, в который размещаются все компоненты (Arduino, светодиоды и другие элементы). Куб или аналогичная форма — это решение для компактного и эстетичного размещения устройства.
* **Основные задачи:**

  * Создание схемы электронного устройства
  * Защита электронных компонентов.
  * Создание удобного и функционального вида устройства.

---

## Сборка и запуск

### 1. Сборка схемы и прошивка Arduino

Клонируй репозиторий и читай README.md
```bash
git clone https://github.com/lshnls/keylamp-gnome-plugin.git
```
### 2. Установка GNOME-плагина

Клонируй репозиторий и читай README.md
```bash
git clone https://github.com/lshnls/keylamp-gnome-plugin.git
```

### 3. Установка Python-сервиса

Клонируй репозиторий и читай README.md
```bash
git clone https://github.com/lshnls/keylamp-python-service.git
```

### 4. Создание корпуса

Используте эпоксидную смолу для создания герметичного корпуса, который будет удобен для размещения компонентов.

Материалы:
- Эпоксидная смола
- Диффузиант
- Силиконовая форма куба 7x7x7 см.
- Защитные перчатки и маска при работе с химическими веществами

Советы:
- Используйте эпоксидную смолу для больших объемов заливки (от 70 мм.)
- Тчательно перемешивайте компоненты смолы  и диффузиантЮ удалите пузыри с помощью технического фена. 
- USB кабель подключите перед заливкой, а его конец погрузите в смолу вместе с собранной ранее схемой arduino (неразъемное соединение будет надежнее).

## Лицензия

MIT License — используй, дорабатывай, улучшай.
